(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{223:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(0),o=p(r),c=p(n(780)),a=p(n(4)),u=p(n(1)),d=n(2),l=p(n(8)),s=p(n(6)),f=p(n(782));function p(t){return t&&t.__esModule?t:{default:t}}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(784);var w=!1,E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(p,t);var e,n,i,s=v(p);function p(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),_(b(e=s.call(this,t)),"$container",null),_(b(e),"state",{autoHide:!1,productHtmlDescription:"",productDescriptionType:""});var n=t.productId,i=t.shopLibVer,r=t.crossdomainToken;return e.ref=o.default.createRef(),window.pageConfig={productId:n,shopLibVer:i,host_token:r,detailFileName:"detail-new"},e.intersectionObserver=new IntersectionObserver((function(t){t[0].intersectionRatio<=0||((0,u.default)("/sc.details.autoExpExpand","EXP"),e.intersectionObserver.disconnect())})),e}return e=p,(n=[{key:"componentDidUpdate",value:function(){this.ref.current&&this.intersectionObserver.observe(this.ref.current)}},{key:"componentDidMount",value:function(){var t=this;this.fetchDescription(),document.addEventListener("scroll",(function(t){window.scrollY>3900&&!1===w&&((0,u.default)("/sc.details.scrollCheckTop","EXP"),w=!0)})),a.default.on("productSpecification:loaded",(function(){var e,n;"test"===(null===(e=t.props)||void 0===e?void 0:e.PCDetailDescriptionShow)&&(null===(n=document.getElementById("block-tab-product"))||void 0===n?void 0:n.clientHeight)>3900&&(t.setState({autoHide:!0}),(0,u.default)("/sc.details.autoHideExpand","EXP"))}))}},{key:"removeNavigation",value:function(t,e,n){if(!t)return n.replace(/src=\"(.[^"]*)/gi,(function(t){return t.replace(/[<>]/gi,"")}));var i;if("desc_v_1"===t?i={"products description":!0,"product description":!0}:"desc_v_2"===t&&(i={"company profile":!0}),!i)return n;var r=document.createElement("DIV");return r.innerHTML=n,"magicEdit"===e?Array.from(r.querySelectorAll("div[module-title=detailProductNavigation]")).filter((function(t){if(t&&t.children.length>0){var e=t.children[0],n=e.textContent||e.innerTEXT||"";return i[n.toLowerCase()]}return!1})).forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})):Array.from(r.querySelectorAll("div[class=mceSectionContainer]")).filter((function(t){if(t&&t.getAttribute){var e=t.getAttribute("data-section-title")||"";return i[e.toLocaleLowerCase()]}return!1})).forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})),r.innerHTML}},{key:"fetchDescription",value:function(){var t=this,e=this.props,n=e.productId,i=e.language;e.i18n,fetch("/event/app/mainAction/desc.htm?detailId=".concat(n,"&language=").concat("string"==typeof i?i:"")).then((function(t){return t.json()})).then((function(e){if(e.success){var i=e.data,r=e.bucketKey,o=i.productDescriptionType,u=i.productHtmlDescription;u=t.removeNavigation(r,o,u);var d="magicEdit"===o,l="";if(d){var s=document.createElement("DIV");if(s.innerHTML=u,s.children&&s.children.length>1){var p=s.children[0];p&&"detail_decorate_root"===p.id&&Array.from(s.children).slice(1).forEach((function(t){"J_module"===t.className&&p.appendChild(t)})),l=s.innerHTML}}t.setState({productHtmlDescription:l||u,productDescriptionType:o},(function(){(0,c.default)(t.$container,{maxWidth:t.$container.clientWidth,isMagicEdit:d}),a.default.trigger("productSpecification:loaded"),window.__PROMOTION_BOOTSTRAP__&&window.__PROMOTION_BOOTSTRAP__("detail-banner-below"),d&&(0,f.default)({productId:n})}))}}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.productHtmlDescription,i=e.productDescriptionType,c=e.autoHide,a=this.props.i18n,s="magicEdit"===i;return o.default.createElement(r.Fragment,null,o.default.createElement("div",{id:"J-rich-text-description",className:(0,l.default)("richtext richtext-detail rich-text-description",{"auto-hide":c},{"is-magic":s}),ref:function(e){t.$container=e},dangerouslySetInnerHTML:{__html:n}}),c&&o.default.createElement("div",{className:"more-button","data-exp":"auto-explord",ref:this.ref},o.default.createElement(d.Button,{type:"primary",size:"large",onClick:function(){(0,u.default)("/sc.details.autoHideBtn","CLK"),t.setState({autoHide:!1})}},a.detail_pc_fold_details)))}}])&&h(e.prototype,n),i&&h(e,i),p}(r.PureComponent);_(E,"propTypes",{productId:s.default.number,language:s.default.string,crossdomainToken:s.default.string,shopLibVer:s.default.string}),e.default=E},780:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.querySelectorAll("img[data-src]"),i=Array.prototype.slice.call(n,null),r=e.maxWidth,o=e.isMagic;(0,c.default)(i,{maxWidth:r,isMagic:o}),u(i),i.forEach((function(t){t.addEventListener("load",a)}))};var i,r=n(16),o=n(781),c=(i=o)&&i.__esModule?i:{default:i};function a(t){var e=t.currentTarget,n=e.getAttribute("data-alt"),i=e.getAttribute("data-title"),r=e.getAttribute("data-style");function o(t,e,n){n&&t.setAttribute(e,n)}o(e,"alt",n),o(e,"title",i),o(e,"style",r)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==t.length){var e=(0,r.debounce)(n,300);window.addEventListener("scroll",e)}function n(){window.innerHeight;t.forEach((function(t){var e=t.getAttribute("data-src");t.src.indexOf("img-placeholder")>0&&t.setAttribute("src",e)}))}}},781:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxWidth||999999;t.forEach((function(t){e.isMagic||(t.style["max-width"]=n);var i=t.dataset.src;i.indexOf("alicdn.com")>0&&-1===i.indexOf("@")&&(t.dataset.src="".concat(i.replace(".alicdn.com","").replace("//","//s.alicdn.com/@"),"?quality=close")),t.onload=function(){100===this.naturalHeight&&100===this.naturalWidth&&(this.src=i,t.onload=null)};var r,d,l=parseInt(t.getAttribute("ori-width"),10),s=parseInt(t.getAttribute("ori-height"),10),f=parseInt(t.style.width,10)||t.getAttribute("width")||o(t.getAttribute("data-width")),p=parseInt(t.style.height,10)||t.getAttribute("height")||o(t.getAttribute("data-height"));(l||s||f||p)&&(c(f)||c(p)?a(t,[f,p]):(d=f&&p?f>n?l&&s?u(l,s,n,null):[n,p/(f/n)]:[f,p]:f&&!p?u(l,s,Math.min(f,n),null):!f&&p?(r=u(l,s,null,p)[0])>n?u(l,s,n,null):[r,p]:l>n?u(l,s,n,null):[l,s],a(t,d)))}))};var i=new RegExp(/(^[\d.]+$)|(^[\d.]+%$)/),r=new RegExp(/[\d.]+%/);function o(t){return i.test(t)?t:null}function c(t){return r.test(t)}function a(t,e){e&&(t.style.width.indexOf("%")>0||(e[0]&&(t.style.width="".concat(e[0],"px"),t.setAttribute("width",e[0])),e[1]&&(t.style.height="".concat(e[1],"px"),t.setAttribute("height",e[1]))))}function u(t,e,n,i){if(n&&i||!t||!e)return[n,i];var r=t/e;return n?[n,i=n/r]:i?[n=i*r,i]:void 0}},782:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.productId,n=window._magicEditConfig||{};window._magicEditConfig=n,n.productId="".concat(e),n.modules={css:["icbu-detail-edit/icbu-mod-lib/0.0.26/no-next.css"],js:["icbu-detail-edit/icbu-mod-lib/0.0.28/index.js"]},window.__moduleVersions=[{name:"detailSellerRecommend",version:"0.0.14",enabled:!0}],(0,r.loadJsAsync)("//s.alicdn.com/@g/assets-group/magic-edit-loader/".concat((0,c.default)(window,"__version__map.magicEditLoaderVersion"),"/envs/pc/index.js"))};var i,r=n(783),o=n(42),c=(i=o)&&i.__esModule?i:{default:i}},783:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadJsAsync=function(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e)},e.loadCssAsync=function(t){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.body.appendChild(e)}},784:function(t,e,n){}}]);